services:
  portal:
    image: ghcr.io/gosuda/portal:local
    pull_policy: always
    build:
      context: .
      dockerfile: Dockerfile
    command:
      - "--port"
      - "${PORTAL_PORT:-4017}"
      - "--tls-auto"
    environment:
      PORTAL_URL: ${PORTAL_URL:-https://localhost:${PORTAL_PORT:-4017}}
      ADMIN_SECRET_KEY: ${ADMIN_SECRET_KEY:-}
    ports:
      - "4017:4017"
    restart: unless-stopped
